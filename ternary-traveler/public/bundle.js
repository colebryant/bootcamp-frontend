(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
// The purpose of this module is to provide a template for fetch requests to database.json
const data = {
  fetchRequest(fetchObject) {
    let dataSet = fetchObject.dataSet;
    let fetchType = fetchObject.fetchType;
    let specificId = fetchObject.specificId;
    let databaseObject = fetchObject.databaseObject;

    if (fetchType === "GET" && specificId) {
      return fetch(`http://localhost:8088/${dataSet}/${specificId}`).then(response => response.json());
    } else if (fetchType === "GET") {
      return fetch(`http://localhost:8088/${dataSet}`).then(response => response.json());
    } else if (fetchType === "POST") {
      return fetch(`http://localhost:8088/${dataSet}`, {
        method: fetchType,
        headers: {
          "Content-Type": "application/json; charset=utf-8"
        },
        body: JSON.stringify(databaseObject)
      });
    } else if (fetchType === "DELETE") {
      return fetch(`http://localhost:8088/${dataSet}/${specificId}`, {
        method: fetchType,
        headers: {
          "Content-Type": "application/json; charset=utf-8"
        }
      });
    } else if (fetchType === "PUT") {
      return fetch(`http://localhost:8088/${dataSet}/${specificId}`, {
        method: fetchType,
        headers: {
          "Content-Type": "application/json; charset=utf-8"
        },
        body: JSON.stringify(databaseObject)
      });
    } else {
      console.log("fetch didn't work");
    }
  }

};
var _default = data;
exports.default = _default;

},{}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _data = _interopRequireDefault(require("./data"));

var _eventListeners = _interopRequireDefault(require("./eventListeners"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// The purpose of this module is
const domBuilder = {
  createInputForm() {
    const output = $("#output");
    const formContainer = $("<form>").addClass("formContainer").appendTo(output);
    $("<section>", {
      id: "cardsContainer"
    }).appendTo(output);
    $("<h2>").text("Enter A New Point of Interest").appendTo(formContainer);
    $("<fieldset>").append($("<label>", {
      for: "pointName"
    }).text("Name:")).append($("<input>", {
      type: "text",
      name: "pointName",
      id: "pointName"
    })).appendTo(formContainer);
    $("<fieldset>").append($("<label>", {
      for: "pointDescription"
    }).text("Description:")).append($("<textarea>", {
      type: "text",
      name: "pointDescription",
      wrap: "soft",
      id: "pointDescription"
    })).appendTo(formContainer);
    $("<fieldset>").append($("<label>", {
      for: "pointCost"
    }).text("Cost of Visiting:")).append($("<input>", {
      type: "text",
      name: "pointCost",
      id: "pointCost"
    })).appendTo(formContainer);
    const dropdownContainer = $("<fieldset>").append($("<label>", {
      for: "pointLocation"
    }).text("Select Location:")).appendTo(formContainer);
    const dropdownSelect = $("<select>", {
      name: "pointLocation",
      id: "pointLocation"
    }).appendTo(dropdownContainer);

    _data.default.fetchRequest({
      dataSet: "places",
      fetchType: "GET"
    }).then(locations => {
      locations.forEach(location => {
        $("<option>", {
          value: location.name
        }).text(location.name).appendTo(dropdownSelect);
      });
    });

    $("<button>", {
      id: "saveButton"
    }).text("Save").click(_eventListeners.default.handleSaveButton).appendTo(formContainer);
  },

  createPointCard(pointObject) {
    const pointContainer = $("<article>", {
      id: `pointCard--${pointObject.id}`
    }).addClass("pointCard");
    $("<h3>").text(pointObject.name).appendTo(pointContainer);
    $("<p>").text(`Description: ${pointObject.description}`).appendTo(pointContainer);
    $("<p>").text(`Cost of Visiting: ${pointObject.cost}`).appendTo(pointContainer);
    $("<p>").text(`Review: ${pointObject.review}`).appendTo(pointContainer);
    $("<button>", {
      id: "deleteButton"
    }).text("Delete").click(_eventListeners.default.handleDeleteButton).appendTo(pointContainer);
    $("<button>", {
      id: "editButton"
    }).text("Edit").click(_eventListeners.default.handleEditButton).appendTo(pointContainer);
    return pointContainer;
  },

  createEditForm(containerId, pointObject) {
    const editContainer = $("<form>", {
      id: `pointEdit--${containerId}`
    }).addClass("pointEdit");
    $("<h3>").text(pointObject.name).appendTo(editContainer);
    $("<fieldset>").append($("<label>", {
      for: "pointCostEdit"
    }).text("Edit Cost:")).append($("<input>", {
      type: "text",
      name: "pointCostEdit",
      id: `pointCostEdit--${containerId}`
    }).val(pointObject.cost)).appendTo(editContainer);
    $("<fieldset>").append($("<label>", {
      for: "pointReviewEdit"
    }).text("Add/Edit the Review:")).append($("<textarea>", {
      type: "text",
      name: "pointReviewEdit",
      wrap: "soft",
      id: `pointReviewEdit--${containerId}`
    }).val(pointObject.review)).appendTo(editContainer);
    $("<button>", {
      id: "submitButton"
    }).text("Submit").click(_eventListeners.default.handleSubmitButton).appendTo(editContainer);
    const currentContainer = $(`#pointCard--${containerId}`);
    currentContainer.empty();
    currentContainer.append(editContainer);
  },

  createConfirmationPopup(containerId) {
    const popupContainer = $("<section>", {
      id: `popupContainer--${containerId}`
    }).addClass("popupContainer").append($("<p>").text("Are you sure you want to delete this card?")).append($("<button>", {
      id: "confirmButton"
    }).text("Yes").click(_eventListeners.default.handleConfirmButton)).append($("<button>", {
      id: "denyButton"
    }).text("No").click(_eventListeners.default.handleDenyButton));
    return popupContainer;
  },

  appendPointCards() {
    $("#cardsContainer").empty();

    _data.default.fetchRequest({
      dataSet: "interests",
      fetchType: "GET"
    }).then(points => {
      points.forEach(point => {
        const pointCard = this.createPointCard(point);
        $("#cardsContainer").append(pointCard);
      });
    });
  }

};
var _default = domBuilder;
exports.default = _default;

},{"./data":1,"./eventListeners":3}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _data = _interopRequireDefault(require("./data"));

var _domBuilder = _interopRequireDefault(require("./domBuilder"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// The purpose of this module is to create all the event listeners functions to be used in the app
const eventListeners = {
  handleSaveButton() {
    const nameInputted = $("#pointName").val();
    const descriptionInputted = $("#pointDescription").val();
    const costInputted = $("#pointCost").val();
    const locationSelected = $("#pointLocation").val();

    _data.default.fetchRequest({
      dataSet: "places",
      fetchType: "GET"
    }).then(locations => {
      locations.forEach(location => {
        if (location.name === locationSelected) {
          _data.default.fetchRequest({
            dataSet: "interests",
            fetchType: "POST",
            databaseObject: {
              placeId: location.id,
              name: nameInputted,
              description: descriptionInputted,
              cost: costInputted,
              review: ""
            }
          }).then(() => {
            _domBuilder.default.appendPointCards();
          });
        }

        ;
      });
    });
  },

  handleDeleteButton() {
    const currentContainerId = event.target.parentNode.id.split("--")[1];

    const confirmationModal = _domBuilder.default.createConfirmationPopup(currentContainerId);

    $("#output").append(confirmationModal);
  },

  handleConfirmButton() {
    const idToDelete = event.target.parentNode.id.split("--")[1];
    const currentContainerId = event.target.parentNode.id;

    _data.default.fetchRequest({
      dataSet: "interests",
      fetchType: "DELETE",
      specificId: idToDelete
    }).then(() => {
      _domBuilder.default.appendPointCards();

      $(`#${currentContainerId}`).remove();
    });
  },

  handleDenyButton() {
    const currentContainerId = event.target.parentNode.id;
    $(`#${currentContainerId}`).remove();
  },

  handleEditButton() {
    const idToEdit = event.target.parentNode.id.split("--")[1];

    _data.default.fetchRequest({
      dataSet: "interests",
      fetchType: "GET",
      specificId: idToEdit
    }).then(interest => {
      _domBuilder.default.createEditForm(idToEdit, interest);
    });
  },

  handleSubmitButton() {
    const currentEditId = event.target.parentNode.id.split("--")[1];

    _data.default.fetchRequest({
      dataSet: "interests",
      fetchType: "GET",
      specificId: currentEditId
    }).then(interest => {
      _data.default.fetchRequest({
        dataSet: "interests",
        fetchType: "PUT",
        specificId: currentEditId,
        databaseObject: {
          id: interest.id,
          placeid: interest.placeId,
          name: interest.name,
          description: interest.description,
          cost: $(`#pointCostEdit--${currentEditId}`).val(),
          review: $(`#pointReviewEdit--${currentEditId}`).val()
        }
      }).then(() => {
        _domBuilder.default.appendPointCards();
      });
    });
  }

};
var _default = eventListeners;
exports.default = _default;

},{"./data":1,"./domBuilder":2}],4:[function(require,module,exports){
"use strict";

var _domBuilder = _interopRequireDefault(require("./domBuilder"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// The purpose of the module is
_domBuilder.default.createInputForm();

_domBuilder.default.appendPointCards();

},{"./domBuilder":2}]},{},[4])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi9zY3JpcHRzL2RhdGEuanMiLCIuLi9zY3JpcHRzL2RvbUJ1aWxkZXIuanMiLCIuLi9zY3JpcHRzL2V2ZW50TGlzdGVuZXJzLmpzIiwiLi4vc2NyaXB0cy9tYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FDQUE7QUFFQSxNQUFNLElBQUksR0FBRztBQUNULEVBQUEsWUFBWSxDQUFFLFdBQUYsRUFBZTtBQUN2QixRQUFJLE9BQU8sR0FBRyxXQUFXLENBQUMsT0FBMUI7QUFDQSxRQUFJLFNBQVMsR0FBRyxXQUFXLENBQUMsU0FBNUI7QUFDQSxRQUFJLFVBQVUsR0FBRyxXQUFXLENBQUMsVUFBN0I7QUFDQSxRQUFJLGNBQWMsR0FBRyxXQUFXLENBQUMsY0FBakM7O0FBRUEsUUFBSSxTQUFTLEtBQUssS0FBZCxJQUF1QixVQUEzQixFQUF1QztBQUNuQyxhQUFPLEtBQUssQ0FBRSx5QkFBd0IsT0FBUSxJQUFHLFVBQVcsRUFBaEQsQ0FBTCxDQUNOLElBRE0sQ0FDRCxRQUFRLElBQUksUUFBUSxDQUFDLElBQVQsRUFEWCxDQUFQO0FBRUgsS0FIRCxNQUdPLElBQUksU0FBUyxLQUFLLEtBQWxCLEVBQXlCO0FBQzVCLGFBQU8sS0FBSyxDQUFFLHlCQUF3QixPQUFRLEVBQWxDLENBQUwsQ0FDTixJQURNLENBQ0QsUUFBUSxJQUFJLFFBQVEsQ0FBQyxJQUFULEVBRFgsQ0FBUDtBQUVILEtBSE0sTUFHQSxJQUFJLFNBQVMsS0FBSyxNQUFsQixFQUEwQjtBQUM3QixhQUFPLEtBQUssQ0FBRyx5QkFBd0IsT0FBUSxFQUFuQyxFQUFzQztBQUM5QyxRQUFBLE1BQU0sRUFBRSxTQURzQztBQUU5QyxRQUFBLE9BQU8sRUFBRTtBQUNMLDBCQUFnQjtBQURYLFNBRnFDO0FBSzlDLFFBQUEsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFMLENBQWUsY0FBZjtBQUx3QyxPQUF0QyxD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Ozs7O0FDaEdmOzs7O0FBRkE7QUFJQSxvQkFBVyxlQUFYOztBQUNBLG9CQUFXLGdCQUFYIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLy8gVGhlIHB1cnBvc2Ugb2YgdGhpcyBtb2R1bGUgaXMgdG8gcHJvdmlkZSBhIHRlbXBsYXRlIGZvciBmZXRjaCByZXF1ZXN0cyB0byBkYXRhYmFzZS5qc29uXHJcblxyXG5jb25zdCBkYXRhID0ge1xyXG4gICAgZmV0Y2hSZXF1ZXN0IChmZXRjaE9iamVjdCkge1xyXG4gICAgICAgIGxldCBkYXRhU2V0ID0gZmV0Y2hPYmplY3QuZGF0YVNldDtcclxuICAgICAgICBsZXQgZmV0Y2hUeXBlID0gZmV0Y2hPYmplY3QuZmV0Y2hUeXBlO1xyXG4gICAgICAgIGxldCBzcGVjaWZpY0lkID0gZmV0Y2hPYmplY3Quc3BlY2lmaWNJZDtcclxuICAgICAgICBsZXQgZGF0YWJhc2VPYmplY3QgPSBmZXRjaE9iamVjdC5kYXRhYmFzZU9iamVjdDtcclxuXHJcbiAgICAgICAgaWYgKGZldGNoVHlwZSA9PT0gXCJHRVRcIiAmJiBzcGVjaWZpY0lkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmZXRjaChgaHR0cDovL2xvY2FsaG9zdDo4MDg4LyR7ZGF0YVNldH0vJHtzcGVjaWZpY0lkfWApXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChmZXRjaFR5cGUgPT09IFwiR0VUXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjgwODgvJHtkYXRhU2V0fWApXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChmZXRjaFR5cGUgPT09IFwiUE9TVFwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmZXRjaCAoYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC8ke2RhdGFTZXR9YCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBmZXRjaFR5cGUsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhYmFzZU9iamVjdClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2UgaWYgKGZldGNoVHlwZSA9PT0gXCJERUxFVEVcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC8ke2RhdGFTZXR9LyR7c3BlY2lmaWNJZH1gLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IGZldGNoVHlwZSxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSBpZiAoZmV0Y2hUeXBlID09PSBcIlBVVFwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmZXRjaChgaHR0cDovL2xvY2FsaG9zdDo4MDg4LyR7ZGF0YVNldH0vJHtzcGVjaWZpY0lkfWAsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogZmV0Y2hUeXBlLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YWJhc2VPYmplY3QpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJmZXRjaCBkaWRuJ3Qgd29ya1wiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBkYXRhOyIsIi8vIFRoZSBwdXJwb3NlIG9mIHRoaXMgbW9kdWxlIGlzXHJcbmltcG9ydCBkYXRhIGZyb20gXCIuL2RhdGFcIjtcclxuaW1wb3J0IGV2ZW50TGlzdGVuZXJzIGZyb20gXCIuL2V2ZW50TGlzdGVuZXJzXCI7XHJcblxyXG5jb25zdCBkb21CdWlsZGVyID0ge1xyXG4gICAgY3JlYXRlSW5wdXRGb3JtICgpIHtcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSAkKFwiI291dHB1dFwiKTtcclxuICAgICAgICBjb25zdCBmb3JtQ29udGFpbmVyID0gJChcIjxmb3JtPlwiKS5hZGRDbGFzcyhcImZvcm1Db250YWluZXJcIikuYXBwZW5kVG8ob3V0cHV0KTtcclxuICAgICAgICAkKFwiPHNlY3Rpb24+XCIsIHtpZDogXCJjYXJkc0NvbnRhaW5lclwifSkuYXBwZW5kVG8ob3V0cHV0KTtcclxuXHJcbiAgICAgICAgJChcIjxoMj5cIikudGV4dChcIkVudGVyIEEgTmV3IFBvaW50IG9mIEludGVyZXN0XCIpLmFwcGVuZFRvKGZvcm1Db250YWluZXIpO1xyXG5cclxuICAgICAgICAkKFwiPGZpZWxkc2V0PlwiKS5hcHBlbmQoJChcIjxsYWJlbD5cIiwge2ZvcjogXCJwb2ludE5hbWVcIn0pLnRleHQoXCJOYW1lOlwiKSlcclxuICAgICAgICAuYXBwZW5kKCQoXCI8aW5wdXQ+XCIsIHt0eXBlOiBcInRleHRcIiwgbmFtZTogXCJwb2ludE5hbWVcIiwgaWQ6IFwicG9pbnROYW1lXCJ9KSlcclxuICAgICAgICAuYXBwZW5kVG8oZm9ybUNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICQoXCI8ZmllbGRzZXQ+XCIpLmFwcGVuZCgkKFwiPGxhYmVsPlwiLCB7Zm9yOiBcInBvaW50RGVzY3JpcHRpb25cIn0pLnRleHQoXCJEZXNjcmlwdGlvbjpcIikpXHJcbiAgICAgICAgLmFwcGVuZCgkKFwiPHRleHRhcmVhPlwiLCB7dHlwZTogXCJ0ZXh0XCIsIG5hbWU6IFwicG9pbnREZXNjcmlwdGlvblwiLCB3cmFwOiBcInNvZnRcIiwgaWQ6IFwicG9pbnREZXNjcmlwdGlvblwifSkpXHJcbiAgICAgICAgLmFwcGVuZFRvKGZvcm1Db250YWluZXIpO1xyXG5cclxuICAgICAgICAkKFwiPGZpZWxkc2V0PlwiKS5hcHBlbmQoJChcIjxsYWJlbD5cIiwge2ZvcjogXCJwb2ludENvc3RcIn0pLnRleHQoXCJDb3N0IG9mIFZpc2l0aW5nOlwiKSlcclxuICAgICAgICAuYXBwZW5kKCQoXCI8aW5wdXQ+XCIsIHt0eXBlOiBcInRleHRcIiwgbmFtZTogXCJwb2ludENvc3RcIiwgaWQ6IFwicG9pbnRDb3N0XCJ9KSlcclxuICAgICAgICAuYXBwZW5kVG8oZm9ybUNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIGNvbnN0IGRyb3Bkb3duQ29udGFpbmVyID0gJChcIjxmaWVsZHNldD5cIikuYXBwZW5kKCQoXCI8bGFiZWw+XCIsIHtmb3I6IFwicG9pbnRMb2NhdGlvblwifSkudGV4dChcIlNlbGVjdCBMb2NhdGlvbjpcIikpXHJcbiAgICAgICAgLmFwcGVuZFRvKGZvcm1Db250YWluZXIpO1xyXG5cclxuICAgICAgICBjb25zdCBkcm9wZG93blNlbGVjdCA9ICQoXCI8c2VsZWN0PlwiLCB7bmFtZTogXCJwb2ludExvY2F0aW9uXCIsIGlkOiBcInBvaW50TG9jYXRpb25cIn0pXHJcbiAgICAgICAgLmFwcGVuZFRvKGRyb3Bkb3duQ29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgZGF0YS5mZXRjaFJlcXVlc3Qoe1xyXG4gICAgICAgICAgICBkYXRhU2V0OiBcInBsYWNlc1wiLFxyXG4gICAgICAgICAgICBmZXRjaFR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihsb2NhdGlvbnMgPT4ge1xyXG4gICAgICAgICAgICBsb2NhdGlvbnMuZm9yRWFjaChsb2NhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAkKFwiPG9wdGlvbj5cIiwge3ZhbHVlOiBsb2NhdGlvbi5uYW1lfSkudGV4dChsb2NhdGlvbi5uYW1lKVxyXG4gICAgICAgICAgICAgICAgLmFwcGVuZFRvKGRyb3Bkb3duU2VsZWN0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoXCI8YnV0dG9uPlwiLCB7aWQ6IFwic2F2ZUJ1dHRvblwifSkudGV4dChcIlNhdmVcIikuY2xpY2soZXZlbnRMaXN0ZW5lcnMuaGFuZGxlU2F2ZUJ1dHRvbikuYXBwZW5kVG8oZm9ybUNvbnRhaW5lcik7XHJcblxyXG4gICAgfSxcclxuICAgIGNyZWF0ZVBvaW50Q2FyZChwb2ludE9iamVjdCkge1xyXG4gICAgICAgIGNvbnN0IHBvaW50Q29udGFpbmVyID0gJChcIjxhcnRpY2xlPlwiLCB7aWQ6IGBwb2ludENhcmQtLSR7cG9pbnRPYmplY3QuaWR9YH0pLmFkZENsYXNzKFwicG9pbnRDYXJkXCIpO1xyXG4gICAgICAgICQoXCI8aDM+XCIpLnRleHQocG9pbnRPYmplY3QubmFtZSkuYXBwZW5kVG8ocG9pbnRDb250YWluZXIpO1xyXG4gICAgICAgICQoXCI8cD5cIikudGV4dChgRGVzY3JpcHRpb246ICR7cG9pbnRPYmplY3QuZGVzY3JpcHRpb259YCkuYXBwZW5kVG8ocG9pbnRDb250YWluZXIpO1xyXG4gICAgICAgICQoXCI8cD5cIikudGV4dChgQ29zdCBvZiBWaXNpdGluZzogJHtwb2ludE9iamVjdC5jb3N0fWApLmFwcGVuZFRvKHBvaW50Q29udGFpbmVyKTtcclxuICAgICAgICAkKFwiPHA+XCIpLnRleHQoYFJldmlldzogJHtwb2ludE9iamVjdC5yZXZpZXd9YCkuYXBwZW5kVG8ocG9pbnRDb250YWluZXIpO1xyXG4gICAgICAgICQoXCI8YnV0dG9uPlwiLCB7aWQ6IFwiZGVsZXRlQnV0dG9uXCJ9KS50ZXh0KFwiRGVsZXRlXCIpLmNsaWNrKGV2ZW50TGlzdGVuZXJzLmhhbmRsZURlbGV0ZUJ1dHRvbikuYXBwZW5kVG8ocG9pbnRDb250YWluZXIpO1xyXG4gICAgICAgICQoXCI8YnV0dG9uPlwiLCB7aWQ6IFwiZWRpdEJ1dHRvblwifSkudGV4dChcIkVkaXRcIikuY2xpY2soZXZlbnRMaXN0ZW5lcnMuaGFuZGxlRWRpdEJ1dHRvbikuYXBwZW5kVG8ocG9pbnRDb250YWluZXIpO1xyXG5cclxuICAgICAgICByZXR1cm4gcG9pbnRDb250YWluZXI7XHJcbiAgICB9LFxyXG4gICAgY3JlYXRlRWRpdEZvcm0oY29udGFpbmVySWQsIHBvaW50T2JqZWN0KSB7XHJcbiAgICAgICAgY29uc3QgZWRpdENvbnRhaW5lciA9ICQoXCI8Zm9ybT5cIiwge2lkOiBgcG9pbnRFZGl0LS0ke2NvbnRhaW5lcklkfWB9KS5hZGRDbGFzcyhcInBvaW50RWRpdFwiKTtcclxuICAgICAgICAkKFwiPGgzPlwiKS50ZXh0KHBvaW50T2JqZWN0Lm5hbWUpLmFwcGVuZFRvKGVkaXRDb250YWluZXIpO1xyXG5cclxuICAgICAgICAkKFwiPGZpZWxkc2V0PlwiKS5hcHBlbmQoJChcIjxsYWJlbD5cIiwge2ZvcjogXCJwb2ludENvc3RFZGl0XCJ9KS50ZXh0KFwiRWRpdCBDb3N0OlwiKSlcclxuICAgICAgICAuYXBwZW5kKCQoXCI8aW5wdXQ+XCIsIHt0eXBlOiBcInRleHRcIiwgbmFtZTogXCJwb2ludENvc3RFZGl0XCIsIGlkOiBgcG9pbnRDb3N0RWRpdC0tJHtjb250YWluZXJJZH1gfSkudmFsKHBvaW50T2JqZWN0LmNvc3QpKVxyXG4gICAgICAgIC5hcHBlbmRUbyhlZGl0Q29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgJChcIjxmaWVsZHNldD5cIikuYXBwZW5kKCQoXCI8bGFiZWw+XCIsIHtmb3I6IFwicG9pbnRSZXZpZXdFZGl0XCJ9KS50ZXh0KFwiQWRkL0VkaXQgdGhlIFJldmlldzpcIikpXHJcbiAgICAgICAgLmFwcGVuZCgkKFwiPHRleHRhcmVhPlwiLCB7dHlwZTogXCJ0ZXh0XCIsIG5hbWU6IFwicG9pbnRSZXZpZXdFZGl0XCIsIHdyYXA6IFwic29mdFwiLCBpZDogYHBvaW50UmV2aWV3RWRpdC0tJHtjb250YWluZXJJZH1gfSkudmFsKHBvaW50T2JqZWN0LnJldmlldykpXHJcbiAgICAgICAgLmFwcGVuZFRvKGVkaXRDb250YWluZXIpO1xyXG5cclxuICAgICAgICAkKFwiPGJ1dHRvbj5cIiwge2lkOiBcInN1Ym1pdEJ1dHRvblwifSkudGV4dChcIlN1Ym1pdFwiKS5jbGljayhldmVudExpc3RlbmVycy5oYW5kbGVTdWJtaXRCdXR0b24pLmFwcGVuZFRvKGVkaXRDb250YWluZXIpO1xyXG5cclxuICAgICAgICBjb25zdCBjdXJyZW50Q29udGFpbmVyID0gJChgI3BvaW50Q2FyZC0tJHtjb250YWluZXJJZH1gKTtcclxuICAgICAgICBjdXJyZW50Q29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgY3VycmVudENvbnRhaW5lci5hcHBlbmQoZWRpdENvbnRhaW5lcik7XHJcbiAgICB9LFxyXG4gICAgY3JlYXRlQ29uZmlybWF0aW9uUG9wdXAoY29udGFpbmVySWQpIHtcclxuICAgICAgICBjb25zdCBwb3B1cENvbnRhaW5lciA9ICQoXCI8c2VjdGlvbj5cIiwge2lkOiBgcG9wdXBDb250YWluZXItLSR7Y29udGFpbmVySWR9YH0pLmFkZENsYXNzKFwicG9wdXBDb250YWluZXJcIikuYXBwZW5kKCQoXCI8cD5cIikudGV4dChcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBjYXJkP1wiKSlcclxuICAgICAgICAuYXBwZW5kKCQoXCI8YnV0dG9uPlwiLCB7aWQ6IFwiY29uZmlybUJ1dHRvblwifSkudGV4dChcIlllc1wiKS5jbGljayhldmVudExpc3RlbmVycy5oYW5kbGVDb25maXJtQnV0dG9uKSlcclxuICAgICAgICAuYXBwZW5kKCQoXCI8YnV0dG9uPlwiLCB7aWQ6IFwiZGVueUJ1dHRvblwifSkudGV4dChcIk5vXCIpLmNsaWNrKGV2ZW50TGlzdGVuZXJzLmhhbmRsZURlbnlCdXR0b24pKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBvcHVwQ29udGFpbmVyO1xyXG4gICAgfSxcclxuICAgIGFwcGVuZFBvaW50Q2FyZHMoKSB7XHJcbiAgICAgICAgJChcIiNjYXJkc0NvbnRhaW5lclwiKS5lbXB0eSgpO1xyXG4gICAgICAgIGRhdGEuZmV0Y2hSZXF1ZXN0KHtcclxuICAgICAgICAgICAgZGF0YVNldDogXCJpbnRlcmVzdHNcIixcclxuICAgICAgICAgICAgZmV0Y2hUeXBlOiBcIkdFVFwiLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4ocG9pbnRzID0+IHtcclxuICAgICAgICAgICAgcG9pbnRzLmZvckVhY2gocG9pbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9pbnRDYXJkID0gdGhpcy5jcmVhdGVQb2ludENhcmQocG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgJChcIiNjYXJkc0NvbnRhaW5lclwiKS5hcHBlbmQocG9pbnRDYXJkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBkb21CdWlsZGVyOyIsImltcG9ydCBkYXRhIGZyb20gXCIuL2RhdGFcIjtcclxuaW1wb3J0IGRvbUJ1aWxkZXIgZnJvbSBcIi4vZG9tQnVpbGRlclwiO1xyXG5cclxuLy8gVGhlIHB1cnBvc2Ugb2YgdGhpcyBtb2R1bGUgaXMgdG8gY3JlYXRlIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzIGZ1bmN0aW9ucyB0byBiZSB1c2VkIGluIHRoZSBhcHBcclxuXHJcbmNvbnN0IGV2ZW50TGlzdGVuZXJzID0ge1xyXG4gICAgaGFuZGxlU2F2ZUJ1dHRvbigpIHtcclxuICAgICAgICBjb25zdCBuYW1lSW5wdXR0ZWQgPSAkKFwiI3BvaW50TmFtZVwiKS52YWwoKTtcclxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbklucHV0dGVkID0gJChcIiNwb2ludERlc2NyaXB0aW9uXCIpLnZhbCgpO1xyXG4gICAgICAgIGNvbnN0IGNvc3RJbnB1dHRlZCA9ICQoXCIjcG9pbnRDb3N0XCIpLnZhbCgpO1xyXG4gICAgICAgIGNvbnN0IGxvY2F0aW9uU2VsZWN0ZWQgPSAkKFwiI3BvaW50TG9jYXRpb25cIikudmFsKCk7XHJcblxyXG4gICAgICAgIGRhdGEuZmV0Y2hSZXF1ZXN0KHtcclxuICAgICAgICAgICAgZGF0YVNldDogXCJwbGFjZXNcIixcclxuICAgICAgICAgICAgZmV0Y2hUeXBlOiBcIkdFVFwiLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4obG9jYXRpb25zID0+IHtcclxuICAgICAgICAgICAgbG9jYXRpb25zLmZvckVhY2gobG9jYXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uLm5hbWUgPT09IGxvY2F0aW9uU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmZldGNoUmVxdWVzdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTZXQ6IFwiaW50ZXJlc3RzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoVHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlT2JqZWN0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZUlkOiBsb2NhdGlvbi5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWVJbnB1dHRlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbklucHV0dGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29zdDogY29zdElucHV0dGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2aWV3OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbiggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb21CdWlsZGVyLmFwcGVuZFBvaW50Q2FyZHMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGhhbmRsZURlbGV0ZUJ1dHRvbigpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50Q29udGFpbmVySWQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5pZC5zcGxpdChcIi0tXCIpWzFdO1xyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1hdGlvbk1vZGFsID0gZG9tQnVpbGRlci5jcmVhdGVDb25maXJtYXRpb25Qb3B1cChjdXJyZW50Q29udGFpbmVySWQpO1xyXG4gICAgICAgICQoXCIjb3V0cHV0XCIpLmFwcGVuZChjb25maXJtYXRpb25Nb2RhbCk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlQ29uZmlybUJ1dHRvbigpIHtcclxuICAgICAgICBjb25zdCBpZFRvRGVsZXRlID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuaWQuc3BsaXQoXCItLVwiKVsxXTtcclxuICAgICAgICBjb25zdCBjdXJyZW50Q29udGFpbmVySWQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5pZDtcclxuICAgICAgICBkYXRhLmZldGNoUmVxdWVzdCh7XHJcbiAgICAgICAgICAgIGRhdGFTZXQ6IFwiaW50ZXJlc3RzXCIsXHJcbiAgICAgICAgICAgIGZldGNoVHlwZTogXCJERUxFVEVcIixcclxuICAgICAgICAgICAgc3BlY2lmaWNJZDogaWRUb0RlbGV0ZVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oICgpID0+IHtcclxuICAgICAgICAgICAgZG9tQnVpbGRlci5hcHBlbmRQb2ludENhcmRzKCk7XHJcbiAgICAgICAgICAgICQoYCMke2N1cnJlbnRDb250YWluZXJJZH1gKS5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBoYW5kbGVEZW55QnV0dG9uKCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb250YWluZXJJZCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLmlkO1xyXG4gICAgICAgICQoYCMke2N1cnJlbnRDb250YWluZXJJZH1gKS5yZW1vdmUoKTtcclxuICAgIH0sXHJcbiAgICBoYW5kbGVFZGl0QnV0dG9uKCkge1xyXG4gICAgICAgIGNvbnN0IGlkVG9FZGl0ID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuaWQuc3BsaXQoXCItLVwiKVsxXTtcclxuICAgICAgICBkYXRhLmZldGNoUmVxdWVzdCh7XHJcbiAgICAgICAgICAgIGRhdGFTZXQ6IFwiaW50ZXJlc3RzXCIsXHJcbiAgICAgICAgICAgIGZldGNoVHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgc3BlY2lmaWNJZDogaWRUb0VkaXRcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKGludGVyZXN0ID0+IHtcclxuICAgICAgICAgICAgZG9tQnVpbGRlci5jcmVhdGVFZGl0Rm9ybShpZFRvRWRpdCwgaW50ZXJlc3QpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGhhbmRsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50RWRpdElkID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuaWQuc3BsaXQoXCItLVwiKVsxXTtcclxuICAgICAgICBkYXRhLmZldGNoUmVxdWVzdCh7XHJcbiAgICAgICAgICAgIGRhdGFTZXQ6IFwiaW50ZXJlc3RzXCIsXHJcbiAgICAgICAgICAgIGZldGNoVHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgc3BlY2lmaWNJZDogY3VycmVudEVkaXRJZFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oaW50ZXJlc3QgPT4ge1xyXG4gICAgICAgICAgICBkYXRhLmZldGNoUmVxdWVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYXRhU2V0OiBcImludGVyZXN0c1wiLFxyXG4gICAgICAgICAgICAgICAgZmV0Y2hUeXBlOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICAgICAgc3BlY2lmaWNJZDogY3VycmVudEVkaXRJZCxcclxuICAgICAgICAgICAgICAgIGRhdGFiYXNlT2JqZWN0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGludGVyZXN0LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaWQ6IGludGVyZXN0LnBsYWNlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaW50ZXJlc3QubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogaW50ZXJlc3QuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgY29zdDogJChgI3BvaW50Q29zdEVkaXQtLSR7Y3VycmVudEVkaXRJZH1gKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICByZXZpZXc6ICQoYCNwb2ludFJldmlld0VkaXQtLSR7Y3VycmVudEVkaXRJZH1gKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbiggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZG9tQnVpbGRlci5hcHBlbmRQb2ludENhcmRzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZXZlbnRMaXN0ZW5lcnM7IiwiLy8gVGhlIHB1cnBvc2Ugb2YgdGhlIG1vZHVsZSBpc1xyXG5cclxuaW1wb3J0IGRvbUJ1aWxkZXIgZnJvbSBcIi4vZG9tQnVpbGRlclwiO1xyXG5cclxuZG9tQnVpbGRlci5jcmVhdGVJbnB1dEZvcm0oKTtcclxuZG9tQnVpbGRlci5hcHBlbmRQb2ludENhcmRzKCk7Il19
